# 修复HTML图片尺寸异常问题

## 问题分析

HTML格式图片在Markdown中使用了百分比宽度（如 `style="width: 60%;"`），这些百分比是相对于原始flex容器计算的。

当前代码为每张图片创建了新的wrapper div：
```javascript
wrapperDiv.style.cssText = 'display: inline-flex; flex-direction: column; ...';
```

**问题根源**：
- 新wrapper div没有固定宽度
- 图片的 `width: 60%` 现在相对于新wrapper计算
- 导致图片尺寸严重缩小
- 比例关系失衡

## 修复方案

修改processImages函数，不创建新的wrapper div，而是：
1. 保持图片作为flex容器的直接子元素
2. 将备注文本作为flex容器内的最后一个元素（伪元素或特殊处理）
3. 或者为wrapper div保留原始的百分比宽度

### 方案：保留图片宽度，添加特殊处理

```javascript
processImages() {
    const flexWrappers = this.outputElement.querySelectorAll('div[style*="flex"]');
    
    flexWrappers.forEach(wrapper => {
        const flexImages = wrapper.querySelectorAll('img');
        const captions = [];
        
        flexImages.forEach(img => {
            const altText = img.getAttribute('alt');
            if (altText) {
                // 提取图片的百分比宽度
                const widthMatch = img.getAttribute('style').match(/width:\s*([\d.]+)%/);
                const widthPercent = widthMatch ? widthMatch[1] + '%' : 'auto';
                
                // 创建wrapper但保留宽度
                const wrapperDiv = document.createElement('div');
                wrapperDiv.style.cssText = `display: flex; flex-direction: column; align-items: center; width: ${widthPercent};`;
                
                // 保留图片样式（移除width）
                const imgStyle = img.getAttribute('style').replace(/width:\s*[\d.]+%[^;]*;?\s*/g, '').trim();
                img.setAttribute('style', imgStyle);
                
                img.parentNode.insertBefore(wrapperDiv, img);
                wrapperDiv.appendChild(img);
                
                // 添加备注文本
                const caption = document.createElement('div');
                caption.className = 'image-caption';
                caption.textContent = altText;
                caption.style.marginTop = '4px';
                wrapperDiv.appendChild(caption);
            }
        });
    });
    
    // 处理独立图片（非flex容器内）
    // ...保持原有逻辑
}
```

### 效果预期
- 图片恢复正确显示尺寸
- 保持原有的60%、48%、32%等比例关系
- 备注文本正常显示在图片下方
- 不影响其他类型图片